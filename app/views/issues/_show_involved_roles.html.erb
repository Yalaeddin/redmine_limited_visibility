<%
  if @issue && @issue.authorized_viewers.present?
    viewers = @issue.authorized_viewers.split('|').delete_if(&:blank?)
  else
    viewers = Role.find_all_visibility_roles.map(&:id)
  end
%>

<hr/>
<div id='current_involved_roles_list' class='involved-roles' style='display: flex;'>
  <label id="label_involved_roles"><%= l("field_authorized_viewers") %></label>
  <span id="list_of_involved_roles_per_issue">
  <% Role.find_all_visibility_roles.each do |role| %>
    <span class="role disabled <%= (viewers.include?(role.id.to_s) || @issue.authorized_viewers.blank?) ? 'involved' : '' %>" >
      <span class=status-icon><i class=fa-icon-ok></i><i class=fa-icon-remove></i></span>
      <%= role.name %>
    </span>
  <% end %>
  </span>
</div>
